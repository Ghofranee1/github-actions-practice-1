name: String Functions Reference
on: workflow_dispatch

jobs:
  string-functions-demo:
    runs-on: ubuntu-latest
    steps:
      - name: Core String Functions
        run: |
          echo "=== Basic String Functions ==="
          echo "Original: ${{ github.ref }}"
          
          
      - name: String Testing Functions
        run: |
          echo "=== String Testing Functions ==="
          echo "Contains 'main': ${{ contains(github.ref_name, 'main') }}"
          echo "Starts with 'feature': ${{ startsWith(github.ref_name, 'feature/') }}"
          echo "Ends with 'main': ${{ endsWith(github.ref_name, 'main') }}"
          
      - name: JSON and Formatting Functions
        run: |
          echo "=== JSON and Format Functions ==="
          # toJSON - converts to JSON string
          echo "Context as JSON: ${{ toJSON(github) }}"
          # fromJSON - parses JSON (useful with outputs)
          echo "Parse JSON: ${{ fromJSON('{"key": "value"}').key }}"
          
      - name: Hash Functions
        run: |
          echo "=== Hash Functions ==="
          echo "SHA256 of branch: ${{ hashFiles('**/package*.json') }}"
          # Note: hashFiles is for file hashing, not string hashing
          
      - name: Advanced String Manipulation
        env:
          SAMPLE_STRING: "feature/user-authentication-v2"
        run: |
          echo "=== Advanced Examples ==="
          # Complex conditionals with strings
          echo "Deploy target: ${{ 
            contains(github.ref_name, 'main') && 'production' || 
            startsWith(github.ref_name, 'feature/') && 'staging' || 
            'development' 
          }}"

  conditional-logic:
    runs-on: ubuntu-latest
    steps:
      - name: Complex String Conditions
        run: |
          echo "=== Complex String Logic ==="
          # Multiple conditions
          echo "Is deployable: ${{ 
            github.ref_name == 'main' || 
            startsWith(github.ref_name, 'release/') || 
            startsWith(github.ref_name, 'hotfix/') 
          }}"
          
          # Nested conditionals
          echo "Environment: ${{ 
            github.ref_name == 'main' && 'prod' || 
            (startsWith(github.ref_name, 'release/') && 'staging' || 'dev')
          }}"
          
          echo "Short branch name: ${{ contains(github.ref_name, '/') && 'complex' || 'simple' }}"